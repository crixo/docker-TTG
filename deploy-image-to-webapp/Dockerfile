FROM microsoft/azure-cli:latest
WORKDIR /app
COPY ./deploy-image-to-webapp.sh /app
RUN chmod +x deploy-image-to-webapp.sh
ENV CONTAINER_REGISTRY=__DEFAULT_CONTAINER_REGISTRY__ \
    CONTAINER_REGISTRY_UN=__DEFAULT_CONTAINER_REGISTRY_UN__ \
    CONTAINER_REGISTRY_PWD=__DEFAULT_CONTAINER_REGISTRY_PWD__ \
    AZURE_SUBSCRIPTION=__DEFAULT_AZURE_SUBSCRIPTION__ \
    IMAGE_NAME=__DEFAULT_IMAGE_NAME__ \
    RESOURCE_GROUP=__DEFAULT_RESOURCE_GROUP__ \
    CLIENT_ID=__DEFAULT_SP_CLIENT_ID__ \
    CLIENT_SECRET=__DEFAULT_SP_CLIENT_SECRET__ \
    TENANT_ID=__DEFAULT_SP_TENANT_ID__
CMD ["sh", "-c", "/app/deploy-image-to-webapp.sh"]
